---
title: 'Stripe Connect Setup'
description: 'Replay allows you to use your own Stripe account and connect to us using [Stripe Connect](https://stripe.com/connect). This enables you to sell your products to your end users as you normally would, while Replay handles all the automation based on the data in your Stripe account.'
---

# Setup Steps

Follow these steps to connect your Stripe account with Replay:

## 1. Set Up Your Stripe Account

Contact our support team (support@replay.sale) to begin the setup process.
- **If you have an existing Stripe account**: We'll send you a link to connect it directly to Replay
- **If you don't have a Stripe account**: We'll send you a link to create a Stripe account and automatically connect it to us

## 2. Configure Product Metadata

The automation between Replay and Stripe is handled through **Stripe product metadata**. It's crucial that these metadata fields are set on the **product** level, not on the customer or subscription level.

<Note type="warning">
**Important:** Copy and paste the metadata keys exactly as written to avoid errors. These metadata fields **must be on the product**, not the customer or subscription.
</Note>

### Possible Metadata Fields
You can use one, two, or all of the fields below on your stripe **product** to customize behavior.
| Metadata Key | Value | Purpose | Behavior When Set |
|--------------|-------|---------|----------|
| `usageType` | `seats` | Enables automatic active user reporting | Replay sends nightly reports with active user counts to your Stripe account. We'll update the quantity of the subscription item with the number of active users |
| `numCreatableRolePlays` | Number (e.g., `5`, `10`, `25`) | Limits roleplay creation | Customers can create up to specified number of roleplays |
| `numCreatableScripts` | Number (e.g., `3`, `8`, `15`) | Limits script creation | Customers can create up to specified number of scripts |

<Note type="info">
**Unlimited Options:** To allow unlimited creation, simply **leave the metadata field off** for `numCreatableRolePlays` or `numCreatableScripts`.
</Note>

## 3. Verify Integration

After you have your stripe account set up and it is connected to us, we'll want to verify that everything is working correctly. 

**Verification might include:**
- Ensuring active users are reported (happens nightly at 12:00am UTC)
- Ensuring any activity limits are being obeyed
- Ensuring we can see your stripe account as a connected account

**Possible issues might include:**
- Misspelling product metadata
- Setting metadata on the subscription or customer, instead of on the product
- Not connecting your Stripe account to ours

---

# Reference Information

## What Data We Can Access

When Stripe Connect is properly configured, Replay can view and interact with: customer information, subscription data, product information, payment information, billing portal access

<Note type="warning">
**Security Warning:** Because we can access sensitive billing and customer data through Stripe Connect, ONLY set up this integration with people and companies you trust completely. This includes access to customer information, payment details, and subscription data.

We do not use the connector to charge accounts or process payments; we only use it to update and fetch relevant customer data.
</Note>

<Frame caption="Example of a connected account, with the various tabs we have access to">
  <img src="/images/stripe-connected-account-example.png" alt="Stripe Connect Dashboard View - What partners can see in their Stripe dashboard when connected" />
</Frame>

## Active User Definition

Replay considers the following as **active users** for billing purposes:

- **Direct Users**: Users with username and password who can log into Replay directly and are **not** disabled
- **Integration Users**: SCORM/LMS or iframe integration users who have completed at least one activity during the billing period (roleplay, script memorization, etc.)

## Customer Creation Automation

When a customer is created in Stripe, Replay automatically creates a corresponding company:

| Stripe Field | Behavior |
|--------------|----------|
| **Customer Name** | Used to create the Replay company |
| **Account Email** | If provided: Replay creates first user and sends email invitation<br/><br/>If not provided: Company created, manual user invitation required |

## Billing Portal Integration

To enable your customers to access the Stripe billing portal through Replay:

1. **[Set up your billing portal](https://docs.stripe.com/customer-management)** in your Stripe account
2. Users with the `Admin` role on Replay, or users who have the `billing` permission can access the Stripe billing portal through `Manager Portal -> Billing -> Billing Portal`

<Note type="info">
**Setup Required:** You must configure your billing portal in Stripe before enabling this feature in Replay.
</Note>

## Payment Failure Handling
Replay **does not send** failed payment emails - this is handled entirely by Stripe.

- Configure failed payment emails in your Stripe account if needed
- Reference: [Stripe Customer Emails Documentation](https://docs.stripe.com/billing/revenue-recovery/customer-emails)

## Subscription Status Automation

Replay automatically reacts to the following Stripe subscription events:

| Event | Action | Description |
|-------|--------|-------------|
| **Subscription created** | ✅ Enable Company | New subscription activates company access |
| **Status → `active`** | ✅ Enable Company | Active subscription enables company |
| **Status → `trialing`** | ✅ Enable Company | Trial subscription enables company |
| **Status → `cancelled`** | ❌ Disable Company | Cancelled subscription disables company |
| **Status → `unpaid`** | ❌ Disable Company | Unpaid subscription disables company |
| **Status → `paused`** | ❌ Disable Company | Paused subscription disables company |
| **Status → `incomplete_expired`** | ❌ Disable Company | Expired incomplete subscription disables company |

## Billing Alignment Recommendations
**Billing Drift Problem:** Subscription number drift can occur between your billing and Replay's billing, potentially causing revenue discrepancies.

### The Problem

**Example Scenario:**
- Replay bills you on May 1st for 110 total users (across all child companies)
- You bill your customers on May 15
- Between May 1 and May 15, one of your customers reduces from 5 to 2 active users
- You've already paid for the higher usage, but won't recoup the difference from your customer

### The Solution

**Align your billing dates** with Replay's billing date to minimize discrepancies. This allows you to charge your customers based on the same usage data that Replay uses to bill you.


<Note type="info">
**Need Help?** Contact our support team (support@replay.sale) for assistance with your Stripe Connect setup.
</Note>


